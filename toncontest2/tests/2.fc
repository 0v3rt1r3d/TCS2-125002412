[int, tuple, cell, tuple, int] test1_data() method_id(0) {
	tuple stack = unsafe_tuple([new_dict(), new_dict()]);

  cell data = begin_cell().end_cell();

  stack~dump();
  int function_selector = 79555;
  return [function_selector, stack, data, get_c7(), null()];
}

_ test1(int exit_code, cell data, tuple stack, cell actions, int gas) method_id(1) {
  throw_if(20, ~ cell_null?(stack.at(0)));
  throw_if(20, ~ cell_null?(stack.at(1)));
}

[int, tuple, cell, tuple, int] simple_test_data() method_id(2) {
  slice value1 = begin_cell().store_int(1, 32).end_cell().begin_parse();
  slice value2 = begin_cell().store_int(2, 32).end_cell().begin_parse();
  slice value3 = begin_cell().store_int(3, 32).end_cell().begin_parse();

  cell dict1 = new_dict();
  cell dict2 = new_dict();

  int key_len = 32;

  dict1~idict_set(key_len, 1, value1);
  dict1~idict_set(key_len, 2, value2);
  dict1~idict_set(key_len, 3, value3);

  dict2~idict_set(key_len, 1, value2);
  dict2~idict_set(key_len, 2, value1);
  dict2~idict_set(key_len, 4, value3);

	tuple stack = unsafe_tuple([dict1, dict2]);

  cell data = begin_cell().end_cell();
  int function_selector = 79555;
  return [function_selector, stack, data, get_c7(), null()];
}

_ simple_test(int exit_code, cell data, tuple stack, cell actions, int gas) method_id(3) {
  int key_len = 32;

  cell merged_d = stack.at(0);
  cell discarded_d = stack.at(1);

  ;; throw_if(2, ~ cell_null?(merged_d));
  ;; throw_if(2, ~ cell_null?(discarded_d));

  {
    (slice res, _) = merged_d.idict_get?(32, 1);
    (_, int value) = res.load_int(32);
    value~dump();
    throw_if(2, value != 1);
  }

}

